<!DOCTYPE html>
<html>
<head>
    <title>Interactive Envelope</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Emilys+Candy&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Delius&display=swap');

        body {
            background: #662222;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            perspective: 1000px;
            overflow: hidden;
        }

        /* The Main Container */
        .main-wrapper {
            width: 370px;
            height: 200px;
            position: relative;
            transition: transform 1100ms cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
        }

        /* Flip Action */
        .main-wrapper.is-flipped {
            transform: rotateY(180deg);
        }

        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border: 4px solid #c4b394;
            background: #f5daa7;
            box-sizing: border-box;
        }

        /* --- FRONT SIDE --- */
        .front {
            z-index: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .front h1 {
            font-family: "Emilys Candy", serif;
            font-weight: 400;
            color: #610606;
            margin: 0;
            font-size: 28px;
        }
        .stamp {
            position: absolute;
            top: 13px;
            left: 9px;
            height: 30px;
            width: 38px;
            transform: rotate(345deg);
        }

        /* --- BACK SIDE --- */
        .back {
            transform: rotateY(180deg);
            z-index: 1;
        }

        .panel {
            position: absolute;
            top: 0px;
            left: -4px;
            height: 125px;
            width: 370px;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            background: #f5daa7;
            border: 4px solid #c4b394; /* Match the border */
            z-index: 11;
            transition: all 0.5s;
        }

        #open:checked ~ .panel {
            animation: move 1100ms forwards;
        }

        /* Interior Envelope Lines */
        .l1, .l2 { position: absolute; background: #c4b394; height: 5px; width: 225px; z-index: 111; }
        .l1 { top: 58px; left: -21px; transform: rotate(33.5deg); }
        .l2 { top: 59px; left: 165px; transform: rotate(-33.5deg); }

        .down {
            position: absolute;
            top: 72px;
            left: -4px;
            height: 125px;
            width: 370px;
            clip-path: polygon(50% 0, 0 100%, 100% 100%);
            background: #f5daa7;
            z-index: 111;
            border-bottom: 4px solid #c4b394;
        }

        .right { position: absolute; top: 0; left: 0; height: 100%; width: 148px; background: inherit; clip-path: polygon(100% 50%, 0 0, 0 100%); z-index: 11111; }
        .left { position: absolute; top: 0; right: 0; height: 100%; width: 150px; background: inherit; clip-path: polygon(0 50%, 100% 0, 100% 100%); z-index: 11111; }

        #open, #out { display: none; }

        /* The Heart Seal */
        .seal {
            position: absolute;
            top: 86px;
            left: 160px;
            height: 50px;
            width: 50px;
            background: red;
            transform: rotate(45deg);
            cursor: pointer;
            z-index: 11111112; /* Kept very high */
            transition: transform 0.3s, opacity 0.3s;
        }
        .seal::before, .seal::after {
            content: ''; display: block; position: absolute; height: 50px; width: 50px; background: red; border-radius: 50%;
        }
        .seal::before { top: -25px; left: 0px; }
        .seal::after { top: 0px; left: -25px; }

        #open:checked ~ .seal {
            opacity: 0; /* Heart disappears to let text be readable */
            pointer-events: none;
        }

        @keyframes move {
            100% { top: -125px; transform: rotateX(180deg); z-index: 0; }
        }

        /* The Letter Page */
        .page {
            position: absolute;
            top: 10px;
            left: 25px;
            height: 120px;
            width: 310px;
            background: white;
            z-index: 5;
            opacity: 0;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        #open:checked ~ .page {
            opacity: 1;
            z-index: 999;
            animation: appear 600ms forwards;
            cursor: pointer;
        }

        @keyframes appear { to { opacity: 1; } }

        #out:checked ~ .page {
            animation: out 1000ms ease forwards;
        }

        @keyframes out {
            to { top: -220px; height: 420px; z-index: 1111111; }
        }

        /* The Message */
        .message {
            position: absolute;
            top: -200px;
            left: 40px;
            font-family: "Delius", cursive;
            width: 280px;
            opacity: 0;
            color: #333;
            line-height: 1.5;
            pointer-events: none;
            z-index: 11111111;
        }

        #out:checked ~ .message {
            animation: text 1000ms forwards;
            animation-delay: 300ms; /* Synced with page rising */
        }

        @keyframes text {
            to { opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="main-wrapper" id="mainWrapper" onclick="flipEnvelope()">
        <div class="front">
            <h1>To: Ms.Pari Kadyan</h1>
            <img class="stamp" src="stamp.png" alt="stamp">
        </div>

        <div class="back" onclick="event.stopPropagation()">
            <input type="checkbox" id="open">
            <label for="open" class="seal"></label>
            
            <div class="panel"></div>
            
            <div class="down"></div>
            <div class="right"></div>
            <div class="left"></div>
            
            <input type="checkbox" id="out">
            <label for="out" class="page"></label>
            
            <div class="message">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque dapibus eleifend nisl eget molestie. 
                Aliquam facilisis euismod lorem, quis dignissim turpis. Fusce molestie quam magna. 
                <br><br>
                Happy Coding!
            </div>
        </div>
    </div>

    <script>
        function flipEnvelope() {
            document.getElementById('mainWrapper').classList.add('is-flipped');
        }
    </script>
</body>
</html>
